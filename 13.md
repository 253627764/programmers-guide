# Chapter 13: Audio

Your game will surely need sound! Cocos2d-x provides an audio engine so ways we
call it `SimpleAudioEngine`. `SimpleAudioEngine` can be used to play background
music as well as sound effects through out your game play. `SimpleAudioEngine` is
a shared singleton object so you can simple call it from anywhere in your code. When
creating a sample `HelloWorld` project we do all the setup required for you, out of
the box. `SimpleAudioEgnine` support a number of formats, including *MP3* and
*Core Audio Format*

## Getting Started

FIXME: this is not "getting started". Before this I just say: This is how to play a sound,
this is how to play a music, and stop

FIXME: And an "advanced" section I will mention the setup, multi-tasking etc.

There are considerations to keep in mind when using audio in your game. Mostly
when operating on mobile devices such as phones and tablets. What happens when
you multi-task on your phone and are switching between apps? Or when a phone
call comes in? You need to handle these exceptions in your game. Fortunately we
help you here.

In `AppDelegate.cpp`, notice the following methods:
```cpp
// This function will be called when the app is inactive. When comes a phone call,
// it's be invoked too
void AppDelegate::applicationDidEnterBackground() {
    Director::getInstance()->stopAnimation();

    // if you use SimpleAudioEngine, it must be pause
    // SimpleAudioEngine::getInstance()->pauseBackgroundMusic();
}

// this function will be called when the app is active again
void AppDelegate::applicationWillEnterForeground() {
    Director::getInstance()->startAnimation();

    // if you use SimpleAudioEngine, it must resume here
    // SimpleAudioEngine::getInstance()->resumeBackgroundMusic();
}
```

Notice the commented out lines for `SimpleAudioEngine` make sure to
uncomment these if you are using `SimpleAudioEngine` for background sounds
and sound effects.

## A simple to use API
The API for `SimpleAudioEngine` is, of course, simple!

### Play background music
Play an audio file for use as background music. This can be repeated
continuously.

FIXE: Don't call getInstance() twice

```cpp
auto audio = SimpleAudioEngine::getInstance();

// set the background music and continuously play it.
audio->playBackgroundMusic("mymusic.mp3", true);

// set the background music and play it just once.
audio->playBackgroundMusic("mymusic.mp3", false);
```
### Play a sound effect.
Play a sound effect.
```cpp
// play a sound effect, just once.
SimpleAudioEngine::getInstance()->playEffect("myEffect.mp3", false, 1.0f, 1.0f, 1.0f);
```

### Pausing, stopping, resuming music and sound effects
After you start to play music and sound effects you might need to pause,
stop or resume after certain operations. This can be done easily.
```cpp
// pause background music.
SimpleAudioEngine::getInstance()->pauseBackgroundMusic();

// pause a sound effect.
SimpleAudioEngine::getInstance()->pauseEffect();

// pause all sound effects.
SimpleAudioEngine::getInstance()->pauseAllEffects();
```
```cpp
// stop background music.
SimpleAudioEngine::getInstance()->stopBackgroundMusic();

// stop a sound effect.
SimpleAudioEngine::getInstance()->stopEffect();

// stops all running sound effects.
SimpleAudioEngine::getInstance()->stopAllEffects();
```
```cpp
// resume background music.
SimpleAudioEngine::getInstance()->resumeBackgroundMusic();

// resume a sound effect.
SimpleAudioEngine::getInstance()->resumeEffect();

// resume all sound effects.
SimpleAudioEngine::getInstance()->resumeAllEffects();
```

### Advanced audio functionality
There is more to the API that you can take advantage of. Let's go ahead
and mention a few more items.

```cpp
// setting the volume specifying value as a float
SimpleAudioEngine::getInstance()->setEffectsVolume(5.0f);

// pre-loading background music and effects. You could pre-load
// effects, perhaps on app startup so they are already loaded
// when you want to use them.
SimpleAudioEngine::getInstance()->preloadBackgroundMusic("myMusic1.mp3");
SimpleAudioEngine::getInstance()->preloadBackgroundMusic("myMusic2.mp3");

SimpleAudioEngine::getInstance()->preloadEffect("myEffect1.mp3");
SimpleAudioEngine::getInstance()->preloadEffect("myEffect2.mp3");

// unload a sound from cache. If you are finished with a sound and
// you wont use it anymore in your game. unload it to free up
// resources.
SimpleAudioEngine::getInstance()->unloadEffect("myEffect1.mp3");
```
