# Chapter 3: Sprites

## What are Sprites
A Sprite is a 2D image that can be animated or transformed by changing its properties,
including `rotation`, `position`, `scale`, `color`, etc.

## Creating Sprites
There are different ways to create Sprites depending upon what you need to accomplish. You
can create a `Sprite` from a number of graphic formats including: PNG, JPEG, TIFF, and others.
Let's go through some create methods and talk about each one.

### Creating a Sprite
A `Sprite` can be created by specifying an image file to use.

```cpp
auto mySprite = Sprite::create("mysprite.png");
```

![](3/i1.png "")

This creates a `Sprite` using the 'mysprite.png' image. The result is that the
created `Sprite` uses the whole image. `Sprite` has the same dimensions
of `mysprite.png`. If the image file is 200x200 the resulting `Sprite` is 200x200.

### Creating a Sprite with a Rect

In the previous example, the created `Sprite` has the same size as the original PNG.
If you want to create a `Sprite` with only a certain portion of the image file, you can
do it by specifying a `Rect`.

`Rect` has 4 values: origin x, origin y, width and height.

```cpp
auto mySprite = Sprite::create("mysprite.png", Rect(0,0,40,40));
```

![](3/i4.png "")

FIXME: Sprites in screenshot must have same position

FIXME: Explain that `Rect` uses the top-left origin

The result is that we are creating a `Sprite` with only a portion of the PNG.
In this case, the `Sprite` size will be 40x40.

FIXME: Say that these 2 examples are equivalents for this particular case

```cpp
auto mySprite = Sprite::create("mysprite.png");
auto mySprite = Sprite::create("mysprite.png", Rect(0,0,200,200));
```


## Creating a Sprite from a Sprite Sheet
A _sprite sheet_ is a way to combine sprites into a single file. This reduces the
overall file size compared to having individual files for each `Sprite`. This means
you will significantly reduce memory usage, file size and loading time.

Also, using sprite sheets is a needed condition in order to achive better performance
by _batching_ the _draw calls_. More on this in the Advanced Chapter.

When using a `sprite sheet`, it is first loaded, in its entirety, into the
`SpriteFrameCache`. `SpriteFrameCache` is a caching class that retains `SpriteFrame` for
future quicker access.

And a `SpriteFrame` is a object that contains the image file name and a `Rect` that
specifies the size of the sprite.

The `SpriteFrameCache` prevents needing to load a `SpriteFrame` multiple times,
over and over. The `SpriteFrame` is loaded once and retained in the `SpriteFrameCache`

Here is an example sprite sheet:

FIXME: Low priority. Show a sprite sheet that maximes the space.

FIXME: Horizontal spritesheet is better because it takes less space

![](3/3_1.png "example SpriteSheet")

Let's tie this all together!

### Loading a Sprite Sheet
Load your `sprite sheet` into the `SpriteFrameCache`, probably in `AppDelegate`:
```cpp
// load the Sprite Sheet
auto spritecache = SpriteFrameCache::getInstance();

// the .pist file can be generated with any of the tools mentioned below
spritecache->addSpriteFramesWithFile("sprites.plist");
```
Now that we have a `sprite sheet` loaded into `SpriteFrameCache` we can create `Sprite` objects
by utilizing it.

### Creating a Sprite from SpriteFrameCache
This creates a `Sprite` by pulling it from the `SpriteFrameCache`.
```cpp
auto mysprite = Sprite::createWithSpriteFrameName("mysprite.png");
```

![](3/i3.png "")

### Creating a Sprite from a SpriteFrame

Another way to create the same `Sprite` is by fetching the `SpriteFrame` from the
`SpriteFrameCache`, and then creating the `Sprite` with the `SpriteFrame`.
Example:

```cpp
// this is equivalent to the previous example,
// but you need to type more
auto newspriteFrame = SpriteFrameCache::getInstance()->getSpriteFrameByName("mysprite.png");
auto newSprite = Sprite::createWithSpriteFrame(newspriteFrame);
```
![](3/i2.png "")

### Tools for creating Sprite Sheets

FIXME: add some text, like... creating spritesheet manually is a tedious work, fortunately
there are tools that generates them automatically.

[Cocos Studio](http://www.cocos2d-x.org/wiki/CocoStudio)

[Texture Packer](https://www.codeandweb.com/texturepacker)

[Zwoptex](https://www.zwopple.com/zwoptex/)

## Sprite Manipulation
After creating a `Sprite`, there are a variety of properties it has that can be manipulated.

Given:
```cpp
auto mySprite = Sprite::create("mysprite.png");
```
![](3/i1.png "")

FIXME: describe color and opacity then describe the properties first: position, rotation, scale, skew. And then
describe in more detail what Anchor point is, the coordinate system is uses, etc.

### Scale
Changes the *Sprites* scale, either by x, y or uniformly for both x and y.

FIXME: A scale of 2 will take less space for the screenshot

```cpp
// increases X and Y size by 4.0 uniformly
mySprite->setScale(4.0);

// increases just X scale by 4.0
mySprite->setScaleX(4.0);

// increases just Y scale by 4.0
mySprite->setScaleY(4.0);
```
![](3/i5.png "")

### Anchor Point and Position
`Anchor Point` is a point that you set as a way of specifying what part of
the `Sprite` will be used when setting the position of it.
```cpp
// bottom left
mySprite->setAnchorPoint(0, 0);

// middle
mySprite->setAnchorPoint(0.5, 0.5);

// top right
mySprite->setAnchorPoint(1, 1);
```
![](3/i6.png "")

### Skew
Changes the *Sprites* skew, either by x, y or uniformly for both x and y.
```cpp
// adjusts the X and Y skew by 4.0 uniformly
mySprite->setSkew(20.0f);

// adjusts the X skew by 4.0
mySprite->setSkewX(20.0f);

// adjusts the Y skew by 4.0
mySprite->setSkewY(20.0f);
```
![](3/i7.png "")

### Rotation
Changes the *Sprites* rotation, by a positive or negative value.
```cpp
// rotates sprite by +20
mySprite->setRotation(20.0f);

// rotates sprite by -20
mySprite->setRotation(-20.0f);

// rotates sprite by +60
mySprite->setRotation(60.0f);

// rotates sprite by -60
mySprite->setRotation(-60.0f);
```
![](3/i8.png "")
